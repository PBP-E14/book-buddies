{% extends "base.html" %} {% block content %}

<p>button wishlist, already read book</p>
<div
    id="book-content"
    class="d-flex flex-wrap justify-content-center gap-5"
></div>

<script>
    async function getBooks() {
        return fetch("{% url 'book:get_book' %}").then((res) => res.json());
    }

    async function refreshBooks() {
        document.getElementById("book-content").innerHTML = "";
        htmlString = "";
        const books = await getBooks();
        books.forEach((book) => {
            htmlString += `
            <div class="card" style="width: 18rem">
                <img
                    src="${book.fields.image_cover}"
                    class="card-img-top"
                    style="height: 18rem; object-fit: cover"
                    alt="${book.fields.title} image"
                />
                <div class="card-body d-flex flex-column justify-content-between gap-2">
                    <div>
                        <h5 class="card-title">${book.fields.title}</h5>
                        <div class="card-text">
                            <p class="m-0">by: ${book.fields.author}</p>
                            <p class="m-0">publisher: ${book.fields.publisher}</p>
                            <p class="m-0">year: ${book.fields.year_publication}</p>
                            </div>
                    </div>
                    <a href="#" class="btn btn-primary">Go somewhere</a>
                </div>
            </div>
            `;
        });
        console.log(books);
        document.getElementById("book-content").innerHTML = htmlString;
    }

    refreshBooks();
</script>
{% endblock %}
